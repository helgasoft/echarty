<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Extras • echarty</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extras">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">echarty</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.6.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/echarty.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-gallery-" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Gallery+</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-gallery-">
<li><a class="dropdown-item" href="../articles/gallery.html">Gallery</a></li>
    <li><a class="dropdown-item" href="../articles/extras.html">Extras</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/mapping.html">Tutor - mapping</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="http://twitter.com/echarty_R" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/helgasoft/echarty/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Extras</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/helgasoft/echarty/blob/HEAD/vignettes/articles/extras.Rmd" class="external-link"><code>vignettes/articles/extras.Rmd</code></a></small>
      <div class="d-none name"><code>extras.Rmd</code></div>
    </div>

    
    
<p>Utilities and small applications built with open-source library
<em>echarty</em>. They accomplish very specific and uncommon tasks.
Considerable amount of time was spent in design, development and testing
of these modules.<br><br> They are fairly priced at <strong>$30 each</strong> and payable
through <a href="https://www.paypal.me/helgasoft/30usd" class="external-link"><strong>Paypal</strong></a>.<br>
Please include module description when ordering under “<em>What is this
payment for ?</em>”. Delivery and support by email. Future versions
could be sent on demand. For questions please <a href="mailto:contact@helgasoft.com?subject=echarty.extras">contact
us</a>.</p>
<div class="section level2">
<h2 id="violin-chart">Violin chart<a class="anchor" aria-label="anchor" href="#violin-chart"></a>
</h2>
Violin charts are similar to boxplot, but show the full distribution of
the data. Supports single or grouped datasets. Rich customization
including jittered data points and mean.<br><details><summary>
Parameters
</summary><ul>
<li>
<strong>df</strong> data.frame with X,Y values (required)</li>
<li>
<strong>cvalue</strong> name of values column (required)</li>
<li>
<strong>cname</strong> optional name of names(categories)
column</li>
<li>
<strong>vertical</strong> boolean for vertical(default) or
horizontal layout</li>
<li>
<strong>lineWidth</strong> width of the contour line, default 3</li>
<li>
<strong>wcoeff</strong> width coefficient for each violin, default
is 0.45</li>
<li>
<strong>jitter</strong> value (&gt;=0) of parameter <em>amount</em>
in jitter, default NULL(no jittered points)</li>
<li>
<strong>j.*</strong> optional jitter points parameters like
j.symbolSize</li>
<li>
<strong>d.*</strong> optional density parameters like
d.adjust,d.cut,etc. d.n default is 64</li>
<li>
<strong>m.*</strong> optional mean point parameters like
m.symbol,m.symbolSize,etc. If missing, mean is not shown.</li>
<li>
<strong>…</strong> optional attributes for the violin contour
series</li>
<li>
<strong>returns</strong> a named list of xAxis, yAxis and series.
Series are: <em>custom</em> for violin, optional <em>scatter</em> for
jitter and mean.</li>
</ul></details><p><br></p>
<video id="vidshp" preload="auto" src="img/violin.mp4" type="video/mp4" muted="muted" controls>
Your browser does not support the video tag.
</video><p><br><br></p>
</div>
<div class="section level2">
<h2 id="keyboard-input-support">Keyboard Input Support<a class="anchor" aria-label="anchor" href="#keyboard-input-support"></a>
</h2>
<p>Enter keyboard mode with <em>click</em>, exit with <em>Tab</em><br>
Keys with functions implemented, many more possible:<br>
- arrowLeft, arrowRight = highlight data points to left and right -
pageUp, pageDown = switch series - +, - = zoom chart in and out</p>
<video id="keys" preload="auto" src="img/keys.mp4" type="video/mp4" muted="muted" controls>
Your browser does not support the video tag.
</video><p><br><br></p>
</div>
<div class="section level2">
<h2 id="d-regression-planes">3D regression planes<a class="anchor" aria-label="anchor" href="#d-regression-planes"></a>
</h2>
<p>The familiar <em>quakes</em> R dataset is visualized in 3D
environment (lat,long,depth) over an area map with tectonic plate
boundaries. User can show/hide 3D regression planes(s) built from
selected 3D points.<br><br><video id="regres" preload="auto" src="img/quake.mp4" type="video/mp4" muted="muted" controls> Your
browser does not support the video tag. </video></p>
<p>See also 3D regression planes in <a href="img/iris3d.mp4">iris
dataset</a>. <br><br></p>
</div>
<div class="section level2">
<h2 id="local-polynomial-regression-fitting-loess">Local Polynomial Regression Fitting (LOESS)<a class="anchor" aria-label="anchor" href="#local-polynomial-regression-fitting-loess"></a>
</h2>
<p>Display regression surfaces built from 3D points.<br><br><video id="loess" preload="auto" src="img/loessSurf.mp4" type="video/mp4" muted="muted" controls> Your
browser does not support the video tag. </video><br><br></p>
</div>
<div class="section level2">
<h2 id="morphing-drilldown">Morphing drilldown<a class="anchor" aria-label="anchor" href="#morphing-drilldown"></a>
</h2>
<p>The <em>mtcars</em> R dataset presented with morphing drilldown.
There are two levels of data: - top level is an aggregate, like counts
by type, or average by type - lower level are the actual data rows</p>
<p>Morphing is achieved between two top levels, and between top and
lower levels.<br><br><video id="morph" preload="auto" src="img/morph.cars.mp4" type="video/mp4" muted="muted" controls>
Your browser does not support the video tag. </video><br><br></p>
</div>
<div class="section level2">
<h2 id="eurobarometer-survey">Eurobarometer Survey<a class="anchor" aria-label="anchor" href="#eurobarometer-survey"></a>
</h2>
<p>Eurobarometer public opinion <a href="https://europa.eu/eurobarometer/surveys/detail/2693" class="external-link">survey Summer
2022</a>.<br>
180 questions with multiple answers mapped by country, 26K participants
from 27 countries.<br>
An interactive R/Shiny/echarty app. <a href="https://helgalabs.shinyapps.io/eurobarometer" class="external-link"><strong>Live
Demo</strong></a><br><a href="https://helgalabs.shinyapps.io/eurobarometer" target="_blank" class="external-link">
<img src="img%2Fcb-eubaro.png" alt="data models"></a> <br><br></p>
<p><a id="ternary"></a></p>
</div>
<div class="section level2">
<h2 id="ternary-plots">Ternary Plots<a class="anchor" aria-label="anchor" href="#ternary-plots"></a>
</h2>
Interactive - data groups with show/hide, zoom, click, customizable
tooltips.<br><details><summary>
3D rotation allows checking for data consistency
</summary>
The plot depicts the ratios of the three variables as positions in an
equilateral triangle. In the example, the three values are sector
percentages of a country’s GDP. Their sum should be 100%, but some data
may be inaccurate. So by rotating the chart in 3D we could easily find
those incomplete data points, for example Belize: 9.7% +13.8% +62.2% =
85.7%
</details><p>Demo <a href="https://gist.githubusercontent.com/toja/811f0ddc765c59c26de544fd0e0ba46f/raw/eef11e930f6c05700faca47711b173f795a84181/sectors.csv" class="external-link">example
data</a> is for world countries GDP by economic sectors. <br><br><video id="vternary" preload="auto" src="img/ternary.mp4" type="video/mp4" muted="muted" controls> Your
browser does not support the video tag. </video><br><br></p>
<p><a id="trimZero"></a></p>
</div>
<div class="section level2">
<h2 id="compressed-bars">Compressed bars<a class="anchor" aria-label="anchor" href="#compressed-bars"></a>
</h2>
Sparse datasets could show excessive <strong>empty spaces</strong> in a
bar chart. Problem is solved by compressing bars with a non-linear axis.
Custom function <em>trimZero</em> will transform the initial dataset and
prepare the non-linear axis for display. Below is a comparison sample.
<details><summary>
View simulated code
</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">A, B, C,D</span></span>
<span><span class="st">10,10,0,0</span></span>
<span><span class="st">0, 7, 8,0</span></span>
<span><span class="st">6, 9, 7,6"</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>text<span class="op">=</span><span class="va">tmp</span>, header<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tz</span> <span class="op">&lt;-</span> <span class="fu">trimZero</span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ec.init.html">ec.init</a></span><span class="op">(</span></span>
<span>  dataset<span class="op">=</span> <span class="va">tz</span><span class="op">$</span><span class="va">dataset</span>, </span>
<span>  xAxis<span class="op">=</span> <span class="va">tz</span><span class="op">$</span><span class="va">xAxis</span>,</span>
<span>  series<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type<span class="op">=</span> <span class="st">'bar'</span>, encode<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x<span class="op">=</span> <span class="st">'x'</span>, y<span class="op">=</span> <span class="st">'value'</span><span class="op">)</span> <span class="op">)</span><span class="op">)</span>,</span>
<span>  visualMap<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    type<span class="op">=</span> <span class="st">'piecewise'</span>, top<span class="op">=</span> <span class="fl">10</span>, right<span class="op">=</span> <span class="fl">10</span>,</span>
<span>    categories<span class="op">=</span> <span class="va">tz</span><span class="op">$</span><span class="va">vmCat</span>,</span>
<span>    inRange<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>color<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'blue'</span>,<span class="st">'green'</span>,<span class="st">'gold'</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</details><p><img src="img%2FtrimZero.png" alt="trimZero"></p>
<p><a id="quadrant"></a></p>
</div>
<div class="section level2">
<h2 id="quadrant-chart">Quadrant chart<a class="anchor" aria-label="anchor" href="#quadrant-chart"></a>
</h2>
<p>Offers the following options:</p>
<ul>
<li>cutomizable axes with or without labels</li>
<li>points with constant or variable size</li>
<li>automatic coloring of points and/or point labels by quadrant</li>
<li>interactivity: tooltip, drag and drop points across the chart</li>
<li>toolbox button to save chart as PNG</li>
<li>responsive auto-resize</li>
</ul>
<p>Only <span style="color:black; background:orange"> Javascript </span>
version currently available.</p>
<p><br><video id="vquadrant" preload="auto" src="img/quadrant.mp4" type="video/mp4" muted="muted" controls> Your
browser does not support the video tag. </video><br><br></p>
<p><a id="axisGroups"></a></p>
</div>
<div class="section level2">
<h2 id="axis-category-groups">Axis category groups<a class="anchor" aria-label="anchor" href="#axis-category-groups"></a>
</h2>
Helper function to build a two-level axis, with responsive
auto-resize.<br>
Only <span style="color:black; background:orange"> Javascript </span>
version currently available, but could be used with <em>ec.init</em>.
<details><summary>
View JS simulated code
</summary><div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">function</span> <span class="fu">grax</span>(dd<span class="op">,</span> vv<span class="op">,</span> ll<span class="op">,</span> gg){<span class="op">...</span>}</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>dset <span class="op">=</span> [</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  [<span class="st">'value'</span><span class="op">,</span> <span class="st">'name'</span><span class="op">,</span> <span class="st">'group'</span><span class="op">,</span> <span class="st">'col'</span>]<span class="op">,</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  [<span class="dv">5</span><span class="op">,</span> <span class="st">'apple'</span><span class="op">,</span><span class="st">'fruits'</span><span class="op">,</span><span class="st">'red'</span>]<span class="op">,</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  [<span class="dv">20</span><span class="op">,</span><span class="st">'orange'</span><span class="op">,</span><span class="st">'fruits'</span><span class="op">,</span><span class="st">'blue'</span>]<span class="op">,</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>  [<span class="dv">36</span><span class="op">,</span><span class="st">'kiwi'</span><span class="op">,</span><span class="st">'fruits'</span><span class="op">,</span><span class="st">'red'</span>]<span class="op">,</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  [<span class="dv">28</span><span class="op">,</span><span class="st">'carrot'</span><span class="op">,</span><span class="st">'vegetables'</span><span class="op">,</span><span class="st">'green'</span>]<span class="op">,</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>  [<span class="dv">22</span><span class="op">,</span><span class="st">'lettuce'</span><span class="op">,</span><span class="st">'vegetables'</span><span class="op">,</span>]<span class="op">,</span> </span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>  [<span class="dv">20</span><span class="op">,</span><span class="st">'cabbage'</span><span class="op">,</span><span class="st">'vegetables'</span><span class="op">,</span>]<span class="op">,</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>  [<span class="dv">18</span><span class="op">,</span><span class="st">'celery'</span><span class="op">,</span><span class="st">'vegetables'</span><span class="op">,</span><span class="kw">null</span>]</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>]<span class="op">;</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>out <span class="op">=</span> <span class="fu">grax</span>(dset<span class="op">,</span> <span class="st">'value'</span><span class="op">,</span> <span class="st">'name'</span><span class="op">,</span> <span class="st">'group'</span>)</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>out<span class="op">.</span><span class="at">series</span><span class="op">.</span><span class="fu">find</span>(o <span class="kw">=&gt;</span> o<span class="op">.</span><span class="at">type</span><span class="op">===</span><span class="st">'bar'</span>)<span class="op">.</span><span class="at">itemStyle</span> <span class="op">=</span> {</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> (v) <span class="kw">=&gt;</span> { gr<span class="op">=</span> v<span class="op">.</span><span class="at">value</span>[<span class="dv">2</span>]<span class="op">;</span> <span class="cf">return</span> gr<span class="op">==</span><span class="st">'fruits'</span> <span class="op">?</span> <span class="st">'#482878'</span> <span class="op">:</span> <span class="st">'#1F9E89'</span><span class="op">;</span> }</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>}</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>option <span class="op">=</span> {</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a>  <span class="dt">dataset</span><span class="op">:</span> out<span class="op">.</span><span class="at">dset</span><span class="op">,</span> </span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>  <span class="dt">series</span><span class="op">:</span> out<span class="op">.</span><span class="at">series</span><span class="op">,</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a>  <span class="dt">xAxis</span><span class="op">:</span> out<span class="op">.</span><span class="at">axis</span><span class="op">,</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a>  <span class="dt">yAxis</span><span class="op">:</span> { <span class="dt">name</span><span class="op">:</span> <span class="st">'val'</span> }<span class="op">,</span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a>  <span class="dt">tooltip</span><span class="op">:</span> { <span class="dt">formatter</span><span class="op">:</span> (p) <span class="kw">=&gt;</span> {<span class="cf">return</span> <span class="st">'y='</span> <span class="op">+</span> p<span class="op">.</span><span class="at">data</span>[<span class="dv">0</span>]<span class="op">;</span> } }</span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
</details><p><br><video id="axgrp" preload="auto" src="img/barGroups.mp4" type="video/mp4" muted="muted" controls> Your
browser does not support the video tag. </video><br><br></p>
<p><a id="zpan"></a></p>
</div>
<div class="section level2">
<h2 id="zoom-pan-as-data-selector">Zoom pan as data selector<a class="anchor" aria-label="anchor" href="#zoom-pan-as-data-selector"></a>
</h2>
<p>Slide a predefined window on time axis with <em>dataZoom</em>
control. Each pan reposition will read the window start/end values and
search for data in that range. If found, data will be displayed as a
series (line,candlestick,etc.). Demo generates random data.<br>
Only <span style="color:black; background:orange"> Javascript </span>
version currently available, but could be used with <em>ec.init</em>.
<br><br><video id="zpan" preload="auto" src="img/zpan.mp4" type="video/mp4" muted="muted" controls> Your
browser does not support the video tag. </video><br><br></p>
<p><a id="customTree"></a></p>
</div>
<div class="section level2">
<h2 id="tree-with-custom-labels">Tree with custom labels<a class="anchor" aria-label="anchor" href="#tree-with-custom-labels"></a>
</h2>
Present hierarchies in style with highly customizable and interactive
trees. <span style="color:black; background:lightblue"> R </span>
version.
<details><summary>
View data
</summary><pre><code><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">'Animals'</span>, value<span class="op">=</span><span class="st">'Biological Hierarchy'</span>,</span>
<span>  label<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>width<span class="op">=</span><span class="fl">160</span>,height<span class="op">=</span><span class="fl">60</span>,backgroundColor<span class="op">=</span><span class="st">'lightgreen'</span>, formatter<span class="op">=</span><span class="st">'{b}\n{c}'</span><span class="op">)</span>,</span>
<span>  children<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">'Vertebrates'</span>,value<span class="op">=</span><span class="st">'with backbone'</span>,type<span class="op">=</span><span class="st">'v'</span>, pic<span class="op">=</span><span class="st">'https://picsum.photos/50/50/'</span>,</span>
<span>      children<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">'Birds'</span>,value<span class="op">=</span><span class="st">'warm-blooded'</span>,type<span class="op">=</span><span class="st">'v'</span>, pic<span class="op">=</span><span class="st">'https://picsum.photos/50/50/'</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">'Mammals'</span>,value<span class="op">=</span><span class="st">'warm-blooded'</span>,type<span class="op">=</span><span class="st">'v'</span>, pic<span class="op">=</span><span class="st">'https://picsum.photos/50/50/'</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">'Fish'</span>,value<span class="op">=</span><span class="st">'cold-blooded'</span>,type<span class="op">=</span><span class="st">'v'</span>, pic<span class="op">=</span><span class="st">'https://picsum.photos/50/50/'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">'Non-vertebrates'</span>,value<span class="op">=</span><span class="st">'without backbone'</span>,type<span class="op">=</span><span class="st">'nonv'</span>, pic<span class="op">=</span><span class="st">'https://picsum.photos/50/50/'</span>,</span>
<span>      children<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">'Arthropods'</span>,value<span class="op">=</span><span class="st">'exoskeleton'</span>,type<span class="op">=</span><span class="st">'nonv'</span>, pic<span class="op">=</span><span class="st">'https://picsum.photos/50/50/'</span>, </span>
<span>            children<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">'Insects'</span>,value<span class="op">=</span><span class="st">'three body parts'</span>,type<span class="op">=</span><span class="st">'nonv'</span>, pic<span class="op">=</span><span class="st">'https://picsum.photos/50/50/'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">'Mollusks'</span>,value<span class="op">=</span><span class="st">'soft bodies'</span>,type<span class="op">=</span><span class="st">'nonv'</span>, pic<span class="op">=</span><span class="st">'https://picsum.photos/50/50/'</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</details><video id="ctree" preload="auto" src="img/tree.custom.mp4" type="video/mp4" muted="muted" controls>
Your browser does not support the video tag.
</video><p><br><br></p>
<p><a id="penguins"></a></p>
</div>
<div class="section level2">
<h2 id="prepare-hierarchical-data">Prepare hierarchical data<a class="anchor" aria-label="anchor" href="#prepare-hierarchical-data"></a>
</h2>
For sunburst, tree, sankey charts.<br>
Transforms <em>data.frame</em> with a record for each leaf to a
hierarchical list (parent/children).<br>
Useful also to build Krona charts from a variety of CSV sources - <a href="https://codepen.io/helgasoft/pen/rNPYbxx" class="external-link">example</a>.<br>
See also <a href="https://helgasoft.github.io/echarty/uc3.html">hierarchies</a> for
an overview. <span style="color:black; background:orange"> Javascript </span> and <span style="color:black; background:lightblue"> R </span> versions.
<details><summary>
View simulated code
</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">'https://cdn.jsdelivr.net/gh/mwaskom/seaborn-data@refs/heads/master/penguins.csv'</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">setHierarchy</span><span class="op">(</span><span class="va">df</span><span class="op">)</span>   <span class="co"># utility</span></span>
<span><span class="fu"><a href="../reference/ec.init.html">ec.init</a></span><span class="op">(</span> </span>
<span>  tooltip<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>formatter<span class="op">=</span> <span class="fu"><a href="../reference/ec.clmn.html">ec.clmn</a></span><span class="op">(</span><span class="va">jfmt</span><span class="op">)</span>, position<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'5%'</span>,<span class="st">'55%'</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  series.param<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type<span class="op">=</span> <span class="st">'sunburst'</span>, radius<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">200</span><span class="op">)</span>, </span>
<span>    emphasis<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>focus<span class="op">=</span> <span class="st">'none'</span>, itemStyle<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>color<span class="op">=</span> <span class="st">'magenta'</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    data<span class="op">=</span> <span class="va">data</span>, labelLayout<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>hideOverlap<span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</details><p><img src="img%2Fpengu.png" alt="penguins"><br><br>   <br> 
<br></p>
<!--
## Panoramas and maps  

Leaflet map with POI markers. Clicking on a marker switches to an interactive custom 360° panorama of the location. Each pano could also have POI as clickable hyperlinks inside.  
video  ech.tmp.R

<div style="display:none;"> 
https://helgasoft.com/#contact-section   Individual price is <b>$66</b>.
</div>

-->
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>(c) Helgasoft</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
